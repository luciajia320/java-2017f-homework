# newHuluwa中面向对象的说明

BY 袁人杰-151070088



## 设计思路

结合课上老师提出的面向对象思想，在老师构建的框架下进行延伸并做适当修改，具体思路如下：

1. 登场人物的抽象：

   出场人物均继承自接口`Creature`；

   在其基础上构建虚类`Villain`，妖怪方的所有生物均继承`Villain`类，并各自拥有独特的属性和方法；

   葫芦娃类则额外继承了接口`Comparable`，以进行排序。

2. 操作的抽象：

   将乱序、排序和阵型变换分别抽象为接口`Shuffle`、`Sorter`、`Formation`；

   随后生成自定义类进行排序变形等操作。

3. 二维空间的抽象：

   建立了坐标类`Coordinate`，并提供了进行坐标比较的`CoordinatorCompare`接口；

   在此基础上建立`Grid`类，并由此构成`Planar`类。

4. 战场抽象：

   建立`theBattleField`类，实现对对峙局面的抽象。

   ​

## 概念、机制与设计理念

#### 封装

将`Huluwa`、`Queue`、`Planar`、`FormatController`等实体或方法进行封装，设置其属性的访问权限并提供对外的接口函数。便于隐藏内部信息，同时避免外界的干扰。

#### 继承

所有生物均继承`Creature`类，使得类与类之间产生联系。同时继承使类之间关系层次更加清晰，为多态提供了条件。

#### 多态

建立一个父类对象的引用，它所指对象可以是这个父类的对象，也可以是它的子类的对象。在方法中以Creature为参数，该方法同样适用于他的子类。这样做提高了程序的扩展性，也使得程序更加简洁。

#### 单一责任原则

1. 葫芦娃、爷爷、蛇精等每一个生物都拥有自己的类，实现其对应的功能；
2. `Coordinate`类表示坐标，用于表示格子间的相互位置；
3. `Grid`类包含了`Coordinate`类记录生物与位置信息，组成`Planar`类，而`planar`类表示葫芦娃所处的二维平面，提供生物的进出与平面的显示方法；
4. 所有关于生物的操作如排序、阵型变换等均提供单独的接口定义，并实例化类来完成相关操作。

单一责任原则可以降低每一个类的复杂度，并减少耦合，使代码更易维护。

#### 开闭原则

开闭原则的主要特征：对于扩展是开放的（Open for extension），对于修改是关闭的（Closed for modification）。具体来看，`Creature`、`Formation`、`Sorter`类定义了必须的一些操作，对类的修改进行了限制；但在实例化时又能够扩展其他的方法和属性。这样使得代码的可维护性和复用性都得到了提高。

#### 里氏代换原则

任何基类可以出现的地方子类一定可以出现。所有的方法都以Creature为参数，这样在具体实现时子类可以替代父类操作。









