# 大作业说明文档

## 一、类介绍
1. Field类：主要用于图形化显示以及响应消息,主要成员对象有:两个player数组，分别代表存活阵营和死亡阵营；主要函数changshe、yanxing排阵型；saveToFile保存到文件，readFile读文件，getnext用于读取上下文件。
2. Player类：存储每个成员，包含正义和邪恶的两方move函数移动、fight函数战斗。
3. Position类：管理二维空间上一个坐标点的相关信息，包括横纵坐标、位于该坐标上的生物、是否被占据、是否为边界，并提供获取这些信息和在该坐标设置生物体的对外接口。
4. Thing2D类：记录二维图片信息，包括显示的位置和Image对象。
5. Tile类：是Thing2D的子类，记录背景砖瓦图片的信息。
6. Ground类：设置窗口和Field对象，初始化UI。
7. Main类：应用程序入口。

## 二、功能介绍
1. 设置`NxN`的二维空间，该空间中的任意一个位置坐标上可且仅可站立一个生物体（正义的和邪恶的均属于生物体）。
2. 七个葫芦娃兄弟和老爷爷在空间左侧摆出“长蛇阵”，妖精（蛇精、蝎子精、小喽啰）在空间右侧摆出“雁行”阵，
3. 所有生物体均实现为一个线程，在空间上随机移动，移动范围限定为以speed为半径的连通区域内，当某个生物体与敌方相遇(两者的X轴距离和Y轴距离小于1.5，即生物体的8连通区域)，两者根据各自strength计算出来的力量值决定生死，死者进程结束，(死亡Creature对象所记录的Position信息不会删除，但清除占据的空间)，生者继续寻找下一个敌人攻击。
4. 某一方生物体全部死亡时，结束所有进程。
5. 键盘响应：  
a)`空格`键：所有生物体线程执行`start()`，向敌方前进，主动追击对方。从按下空格开始时直到结束，整个过程都有记录，并保存到代码目录下，一个生物体的每次移动都将被记录；  
b)`L`键：弹出对话框，让用户选择一个文件，读取文件内容，并按文件中记录的内容进行战斗回放；  
c)左键：在按下L键之后，可以逐条向下查看记录内容并回放，有异常检查，并提示已经是最后的一条记录。中间仍可用L键重新定位；  
d)右键：在按下L键之后，可以回溯上一条记录内容并回放，直到第一条记录，有异常检查。中间仍可用L键重新定位；    
e)`R`键：在游戏结束后，重新开始游戏。  
6. 所有对象信息的访问均由规定接口提供，体现了OCP原则，葫芦娃、老爷爷、蛇精、蝎子精、小喽啰等具体类都继承于Player类，体现了LSP和DIP原则，同时也是“多态”面向对象基本特性的体现。
7. 文件打开异常和生物体越过边界均会抛出异常，存储和读取记录使用输入和输出机制。
8. 为一些重要方法编写单元测试用例，并使用Maven进行构建管理。
9. 战斗场面设定如下：葫芦娃(战斗力等于号码)、老爷爷(战斗力 = 8)、蝎子精(战斗力 = 8)、蛇精(战斗力 = 7)、小喽啰(战斗力从1到6)。


## 三、开发环境  
- Windows7
- eclipse
- JRE1.8.0_144